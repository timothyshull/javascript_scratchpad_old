{"version":3,"sources":["async_pipe_spec.es6"],"names":[],"mappings":"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","file":"angular2/test/change_detection/pipes/async_pipe_spec.js","sourcesContent":["import {ddescribe,\n  describe,\n  it,\n  iit,\n  xit,\n  expect,\n  beforeEach,\n  afterEach,\n  AsyncTestCompleter,\n  inject,\n  proxy,\n  SpyObject} from 'angular2/test_lib';\nimport {IMPLEMENTS} from 'angular2/src/facade/lang';\nimport {AsyncPipe} from 'angular2/src/change_detection/pipes/async_pipe';\nimport {NO_CHANGE} from 'angular2/src/change_detection/pipes/pipe';\nimport {ChangeDetectorRef} from 'angular2/src/change_detection/change_detector_ref';\nimport {EventEmitter,\n  Observable,\n  ObservableWrapper,\n  PromiseWrapper} from 'angular2/src/facade/async';\nexport function main() {\n  describe(\"AsyncPipe\", () => {\n    var emitter;\n    var pipe;\n    var ref;\n    var message = new Object();\n    beforeEach(() => {\n      emitter = new EventEmitter();\n      ref = new SpyChangeDetectorRef();\n      pipe = new AsyncPipe(ref);\n    });\n    describe(\"supports\", () => {\n      it(\"should support observables\", () => {\n        expect(pipe.supports(emitter)).toBe(true);\n      });\n      it(\"should not support other objects\", () => {\n        expect(pipe.supports(\"string\")).toBe(false);\n        expect(pipe.supports(null)).toBe(false);\n      });\n    });\n    describe(\"transform\", () => {\n      it(\"should return null when subscribing to an observable\", () => {\n        expect(pipe.transform(emitter)).toBe(null);\n      });\n      it(\"should return the latest available value\", inject([AsyncTestCompleter], (async) => {\n        pipe.transform(emitter);\n        ObservableWrapper.callNext(emitter, message);\n        PromiseWrapper.setTimeout(() => {\n          expect(pipe.transform(emitter)).toEqual(message);\n          async.done();\n        }, 0);\n      }));\n      it(\"should return NO_CHANGE when nothing has changed since the last call\", inject([AsyncTestCompleter], (async) => {\n        pipe.transform(emitter);\n        ObservableWrapper.callNext(emitter, message);\n        PromiseWrapper.setTimeout(() => {\n          pipe.transform(emitter);\n          expect(pipe.transform(emitter)).toBe(NO_CHANGE);\n          async.done();\n        }, 0);\n      }));\n      it(\"should dispose of the existing subscription when subscribing to a new observable\", inject([AsyncTestCompleter], (async) => {\n        pipe.transform(emitter);\n        var newEmitter = new EventEmitter();\n        expect(pipe.transform(newEmitter)).toBe(null);\n        ObservableWrapper.callNext(emitter, message);\n        PromiseWrapper.setTimeout(() => {\n          expect(pipe.transform(newEmitter)).toBe(NO_CHANGE);\n          async.done();\n        }, 0);\n      }));\n      it(\"should request a change detection check upon receiving a new value\", inject([AsyncTestCompleter], (async) => {\n        pipe.transform(emitter);\n        ObservableWrapper.callNext(emitter, message);\n        PromiseWrapper.setTimeout(() => {\n          expect(ref.spy('requestCheck')).toHaveBeenCalled();\n          async.done();\n        }, 0);\n      }));\n    });\n    describe(\"onDestroy\", () => {\n      it(\"should do nothing when no subscription\", () => {\n        pipe.onDestroy();\n      });\n      it(\"should dispose of the existing subscription\", inject([AsyncTestCompleter], (async) => {\n        pipe.transform(emitter);\n        pipe.onDestroy();\n        ObservableWrapper.callNext(emitter, message);\n        PromiseWrapper.setTimeout(() => {\n          expect(pipe.transform(emitter)).toBe(null);\n          async.done();\n        }, 0);\n      }));\n    });\n  });\n}\nclass SpyChangeDetectorRef extends SpyObject {\n  constructor() {\n    super(ChangeDetectorRef);\n  }\n  noSuchMethod(m) {\n    return super.noSuchMethod(m);\n  }\n}\nObject.defineProperty(SpyChangeDetectorRef, \"annotations\", {get: function() {\n    return [new proxy, new IMPLEMENTS(ChangeDetectorRef)];\n  }});\n//# sourceMappingURL=async_pipe_spec.js.map\n\n//# sourceMappingURL=./async_pipe_spec.map"]}